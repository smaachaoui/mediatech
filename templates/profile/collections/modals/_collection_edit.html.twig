{# Capturer le contenu du modal dans une variable #}
{% set modalEditBody %}
  <div class="mb-3">
    <label class="form-label">Nom</label>
    <input class="form-control" name="name" type="text" required maxlength="150"
           value="{{ c.name }}">
  </div>

  {# Champ Genre - Liste deroulante #}
  <div class="mb-3">
    <label class="form-label">Genre</label>
    <select class="form-select" name="genre" id="editCollectionGenre{{ c.id }}">
      <option value="">Aucun genre specifique</option>
      
      {# 
        Je charge les genres selon le type de collection.
        Les variables bookGenres et movieGenres sont passees depuis le controller.
      #}
      {% if c.mediaType == 'book' and bookGenres is defined %}
        {% for genre in bookGenres %}
          <option value="{{ genre.name }}" {{ c.genre == genre.name ? 'selected' : '' }}>
            {{ genre.name }}
          </option>
        {% endfor %}
      {% elseif c.mediaType == 'movie' and movieGenres is defined %}
        {% for genre in movieGenres %}
          <option value="{{ genre.name }}" {{ c.genre == genre.name ? 'selected' : '' }}>
            {{ genre.name }}
          </option>
        {% endfor %}
      {% endif %}
    </select>
    <small class="form-text text-muted">Le genre aide a classer et filtrer votre collection</small>
  </div>

  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea class="form-control" name="description" rows="4" maxlength="2000">{{ c.description }}</textarea>
  </div>

  <div class="alert alert-info small mb-0">
    <i class="bi bi-info-circle me-1"></i>
    La couverture de votre collection affiche automatiquement les 4 premiers medias ajoutes.
  </div>
{% endset %}

{# Afficher le modal avec le contenu captur√© #}
{% include 'components/_modal.html.twig' with {
  id: 'modalEditCollection' ~ c.id,
  title: 'Modifier la collection',
  action: path('app_profile_edit_collection', { id: c.id }),
  csrf_id: 'edit_collection_' ~ c.id,
  submit_label: 'Enregistrer',
  submit_class: 'btn-primary',
  body: modalEditBody
} %}