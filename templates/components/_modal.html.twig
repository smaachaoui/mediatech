{# templates/components/_modal.html.twig #}

{% set id = id ?? 'modal' %}
{% set title = title ?? '' %}
{% set size = size ?? '' %}
{% set dialogClass = 'modal-dialog modal-dialog-centered' ~ (size ? ' modal-' ~ size : '') %}

<div class="modal fade"
     id="{{ id }}"
     tabindex="-1"
     aria-labelledby="{{ id }}Label"
     aria-hidden="true">
  <div class="{{ dialogClass }}">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="{{ id }}Label">{{ title }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
      </div>

      {# MODE avec formulaire (action d√©finie) #}
      {% if action is defined %}
        <form method="post" action="{{ action }}">
          <div class="modal-body">
            {% if csrf_id is defined %}
              <input type="hidden" name="_token" value="{{ csrf_token(csrf_id) }}">
            {% endif %}

            {% if body is defined %}
              {{ body|raw }}
            {% endif %}
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
              Annuler
            </button>

            <button type="submit" class="btn {{ submit_class|default('btn-primary') }}">
              {{ submit_label|default('Valider') }}
            </button>

            {% if footer is defined %}
              {{ footer|raw }}
            {% endif %}
          </div>
        </form>

      {# MODE sans formulaire (affichage simple) #}
      {% else %}
        <div class="modal-body">
          {% if body is defined %}
            {{ body|raw }}
          {% endif %}
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
            Fermer
          </button>

          {% if footer is defined %}
            {{ footer|raw }}
          {% endif %}
        </div>
      {% endif %}

    </div>
  </div>
</div>
